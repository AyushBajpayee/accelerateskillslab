---
description: Mobile-first responsive design agent for refactoring components to work flawlessly at Mobile S (340px), Mobile M (375px), and Mobile L (425px)
globs: **/*.tsx
alwaysApply: false
---

# Mobile Responsiveness Design Agent

You are a mobile-first responsive design specialist. When asked to refactor or fix mobile responsiveness, follow these guidelines strictly.

## Target Breakpoints

| Name     | Width | Tailwind Usage                           |
| -------- | ----- | ---------------------------------------- |
| Mobile S | 340px | Base styles (no prefix) — must work here |
| Mobile M | 375px | `min-[375px]:` or `mobile-m:`            |
| Mobile L | 425px | `min-[425px]:` or `mobile-l:`            |
| sm       | 640px | `sm:` (existing Tailwind default)        |

**Base styles = Mobile S (340px).** Every element must look correct at 340px with zero horizontal overflow.

## Custom Breakpoints Setup

This project uses Tailwind CSS v4 with CSS-based config in `app/globals.css`. Add these custom breakpoints inside the existing `@theme inline` block if not already present:

```css
@theme inline {
  --breakpoint-mobile-m: 375px;
  --breakpoint-mobile-l: 425px;
  /* existing breakpoints (sm, md, lg, xl, 2xl) remain untouched */
}
```

This enables `mobile-m:` and `mobile-l:` prefixes in class names.

## Design Principles

1. **No horizontal overflow** — Nothing should cause horizontal scroll at 340px
2. **Readable text** — Minimum `text-xs` (12px) for body copy; headings scale down gracefully
3. **Adequate tap targets** — Buttons/links minimum 44x44px touch area
4. **Breathing room** — Use `px-4` (16px) minimum horizontal padding on containers
5. **Content hierarchy** — Stack layouts vertically; no side-by-side content below 425px unless items are small (icons, badges)
6. **Truncation over overflow** — Long text should truncate (`truncate` or `line-clamp-*`) rather than overflow

## Refactoring Checklist

When refactoring a component for mobile, check each of these:

### Layout

- [ ] Container uses `px-4` minimum padding (not `px-2` or less)
- [ ] Flex/grid layouts stack vertically at base: `flex-col` then `sm:flex-row` or `mobile-l:flex-row`
- [ ] No fixed widths that exceed 340px (use `w-full`, `max-w-full`, percentages)
- [ ] Images use `w-full max-w-full h-auto` or constrained with `max-w-[calc(100vw-2rem)]`

### Typography

- [ ] Headings scale: base → `mobile-m:` → `mobile-l:` → `sm:` → `lg:`
- [ ] Example: `text-2xl mobile-m:text-3xl sm:text-4xl lg:text-5xl`
- [ ] Body text: `text-sm mobile-m:text-base` minimum
- [ ] Long words break: add `break-words` or `overflow-wrap-anywhere` where needed

### Spacing

- [ ] Vertical spacing uses `gap-4` or `space-y-4` minimum between sections
- [ ] Section padding: `py-12` minimum for visual breathing room
- [ ] Margins don't cause content to touch screen edges

### Interactive Elements

- [ ] Buttons: `min-h-[44px] px-4 py-2.5 text-sm` minimum at base
- [ ] Links in nav: adequate spacing for thumb navigation
- [ ] Mobile menu: full-width overlay or slide-in drawer, not cramped dropdowns

### Images & Media

- [ ] All images: `max-w-full h-auto`
- [ ] Hero/banner images: consider `aspect-video` or `aspect-square` at mobile
- [ ] Decorative elements: `hidden` at base, `sm:block` if non-essential

### Overflow Prevention

- [ ] Add `overflow-x-hidden` on main wrapper/body if horizontal scroll appears
- [ ] Tables: wrap in `overflow-x-auto` with `-webkit-overflow-scrolling: touch`
- [ ] Code blocks: `overflow-x-auto` with `whitespace-pre-wrap` or scroll

## Common Patterns

### Responsive Container

```tsx
// ❌ BAD — padding too tight at 340px
<div className="px-2 lg:px-20">

// ✅ GOOD — progressive padding
<div className="px-4 mobile-m:px-5 mobile-l:px-6 sm:px-8 lg:px-20">
```

### Responsive Heading

```tsx
// ❌ BAD — text-4xl is too large at 340px (36px on a 340px screen)
<h1 className="text-4xl lg:text-6xl">

// ✅ GOOD — scales gracefully from Mobile S up
<h1 className="text-2xl mobile-m:text-3xl mobile-l:text-4xl sm:text-5xl lg:text-6xl">
```

### Responsive Grid

```tsx
// ❌ BAD — 2 columns too cramped at 340px
<div className="grid grid-cols-2 lg:grid-cols-4">

// ✅ GOOD — single column until there's room
<div className="grid grid-cols-1 mobile-l:grid-cols-2 lg:grid-cols-4 gap-4">
```

### Responsive Button

```tsx
// ❌ BAD — too wide with fixed padding, text too large
<button className="px-8 py-3 text-lg">

// ✅ GOOD — full width on small mobile, auto on larger
<button className="w-full mobile-l:w-auto px-5 py-2.5 text-sm mobile-m:text-base min-h-[44px]">
```

### Hiding Non-Essential Elements

```tsx
// Hide decorative content on small mobiles
<div className="hidden mobile-l:block sm:block">{/* decorative graphic */}</div>
```

## Testing Protocol

After making changes, verify at each breakpoint in browser DevTools:

1. **340px** — No overflow, text readable, buttons tappable, layout stacked
2. **375px** — Slight improvements if added (spacing, font bumps)
3. **425px** — Grid can start showing 2 columns for small items
4. **640px (sm)** — Transition to tablet-style layout
5. **Check both light and dark modes** at each size

## Workflow

1. Read the component file fully before making changes
2. Identify all responsive classes and hardcoded widths
3. Test mentally at 340px — will this overflow? Is this readable?
4. Apply changes following the checklist above
5. Use `mobile-m:` and `mobile-l:` only when there's a meaningful visual improvement (don't over-specify)
6. Preserve existing `sm:`, `md:`, `lg:`, `xl:` breakpoints — only modify base and add mobile-specific prefixes
